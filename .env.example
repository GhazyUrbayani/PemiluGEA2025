# Environment Variables untuk PEMILU GEA 2025

# ============================================
# DATABASE
# ============================================
# Neon PostgreSQL Connection String
DATABASE_URL="postgresql://user:password@host/database?sslmode=require"

# ============================================
# NEXTAUTH (Authentication)
# ============================================
# Secret key untuk NextAuth (generate dengan: openssl rand -base64 32)
NEXTAUTH_SECRET="your-nextauth-secret-here"

# URL aplikasi
NEXTAUTH_URL="http://localhost:3000"
# Untuk production: NEXTAUTH_URL="https://pemilu-gea-2025.vercel.app"

# ============================================
# AZURE AD (Microsoft SSO untuk Pemilih Online)
# ============================================
# Client ID dari Azure App Registration
AZURE_AD_CLIENT_ID="your-azure-ad-client-id"

# Client Secret dari Azure App Registration
AZURE_AD_CLIENT_SECRET="your-azure-ad-client-secret"

# Tenant ID ITB (optional, jika ingin restrict ke tenant tertentu)
AZURE_AD_TENANT_ID="common"
# Ganti dengan tenant ID ITB jika ingin restrict ke @itb.ac.id only

# ============================================
# ENCRYPTION (Keamanan Data Ballot)
# ============================================
# Kunci enkripsi untuk data suara (HARUS KUAT, minimal 32 karakter)
# Generate dengan: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
VOTE_ENCRYPTION_KEY="your-vote-encryption-key-here-minimum-32-chars"

# Salt untuk key derivation (optional, default akan digunakan jika tidak diset)
VOTE_ENCRYPTION_SALT="pemilu-gea-2025-salt"

# ============================================
# EMAIL (Optional - untuk notifikasi)
# ============================================
# SMTP Configuration jika ingin kirim email notifikasi
# EMAIL_SERVER="smtp://username:password@smtp.gmail.com:587"
# EMAIL_FROM="noreply@pemilu-gea.com"

# ============================================
# NEXT.JS
# ============================================
# Environment mode
NODE_ENV="development"
# Untuk production: NODE_ENV="production"

# ============================================
# INSTRUKSI SETUP
# ============================================
# 1. Copy file ini menjadi .env.local
# 2. Isi semua nilai yang diperlukan
# 3. JANGAN commit .env.local ke git
# 4. Untuk production (Vercel), set semua env vars di dashboard Vercel
# 5. Generate keys yang kuat untuk NEXTAUTH_SECRET dan VOTE_ENCRYPTION_KEY

# ============================================
# AZURE AD SETUP (untuk Developer)
# ============================================
# 1. Login ke Azure Portal (portal.azure.com)
# 2. Buat App Registration baru:
#    - Name: PEMILU GEA 2025
#    - Supported account types: "Accounts in any organizational directory"
#    - Redirect URI: Web, http://localhost:3000/api/auth/callback/azure-ad
# 3. Copy Application (client) ID ke AZURE_AD_CLIENT_ID
# 4. Buat Client Secret di "Certificates & secrets"
# 5. Copy Client Secret value ke AZURE_AD_CLIENT_SECRET
# 6. Di "API permissions", tambahkan:
#    - Microsoft Graph: openid, profile, email (delegated)
# 7. Untuk production, tambahkan redirect URI production di Azure

# ============================================
# DATABASE SETUP (untuk Developer)
# ============================================
# 1. Buat database PostgreSQL di Neon (https://neon.tech)
# 2. Copy connection string ke DATABASE_URL
# 3. Jalankan migrations: npm run db:push
# 4. Seed data kandidat: npm run db:seed
# 5. Import DPT (Daftar Pemilih Tetap) ke tabel voter_registry
